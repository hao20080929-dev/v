@font-face {
  font-family: 'Press Start 2P';
  font-style: normal;
  font-weight: 400;
  src: local('Press Start 2P');
}

:root{
  --gb-dark:#0f380f;
  --gb-mid:#306230;
  --gb-light:#8bac0f;
  --gb-bright:#9bbc0f;
  --gb-shadow:#071c07;
  --user-bg: var(--gb-dark);
  --user-glow: var(--gb-bright);
}

html,body{
  height:100%;
}

body.gameboy{
  background: var(--user-bg);
  color: var(--user-glow);
  font-family: 'Press Start 2P', 'Segoe UI', Arial, Helvetica, sans-serif;
  image-rendering: pixelated;
  display: grid;
  place-items: center;
  min-height: 100svh;
  padding: 18px;
}

.screen-frame{
  max-width: 960px;
  margin: 0;
  background: linear-gradient(180deg, var(--user-bg) 0%, #0d300d 100%);
  border-color: var(--gb-mid) !important;
  box-shadow: 0 0 0 4px var(--gb-mid), 0 0 0 8px var(--gb-shadow), inset 0 0 0 2px var(--gb-shadow);
  width: min(960px, calc(100vw - 36px));
}

.screen{
  position: relative;
  padding: 22px 18px 22px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.screen::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: repeating-linear-gradient(180deg, rgba(0,0,0,0.08) 0px, rgba(0,0,0,0.08) 2px, transparent 2px, transparent 4px);
  mix-blend-mode: multiply;
}

.timer{
  font-size: clamp(28px, 9vw, 120px);
  line-height: 1.05;
  letter-spacing: 4px;
  color: var(--user-glow);
  text-shadow: 0 0 6px var(--gb-light), 0 0 18px var(--user-glow);
  text-align: center;
  user-select: none;
}

.timer-box{
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-color: var(--gb-mid) !important;
  box-shadow: inset 0 0 0 2px var(--gb-shadow);
  background: rgba(7,28,7,.35);
  width: fit-content;
  max-width: 92vw;
}

.scale-label{
  font-size: 12px;
  color: var(--gb-light);
  opacity: .9;
}

.exp-bar{
  width: min(92vw, 880px);
  display: grid;
  grid-template-columns: repeat(60, 1fr);
  gap: 4px;
  padding: 14px;
  border: 4px solid var(--gb-mid);
  box-shadow: inset 0 0 0 2px var(--gb-shadow);
  background: rgba(7,28,7,.5);
}

.exp-seg{
  height: clamp(10px, 2.6vw, 20px);
  background: var(--gb-dark);
  border: 2px solid var(--gb-mid);
  box-shadow: inset 0 -2px 0 0 var(--gb-shadow);
}

.exp-seg.filled{
  background: var(--gb-light);
  border-color: var(--gb-light);
  box-shadow: inset 0 -2px 0 0 var(--gb-mid), 0 0 6px 0 var(--gb-light);
}

.nes-container.is-dark.with-title>.title{
  color: var(--user-glow);
}

.controls{
  display: flex;
  gap: 12px;
  justify-content: center;
}

.controls .nes-btn{
  min-width: 96px;
}

.btn-icon{
  margin-right: 6px;
  display: inline-block;
  transform: translateY(1px);
}

.topbar{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-top: 6px;
  margin-bottom: 10px;
}

.topbar-right{
  display: flex;
  gap: 10px;
  align-items: center;
}

.file-input{
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.install-btn[hidden]{
  display: none !important;
}

.view{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.is-hidden{
  display: none !important;
}

.list-actions{
  width: 100%;
  display: flex;
  justify-content: flex-end;
}

.items{
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.item-btn{
  width: 100%;
  text-align: left;
  padding: 0;
}

.item-row{
  width: 100%;
  display: flex;
  gap: 10px;
  align-items: stretch;
}

.item-open{
  flex: 1 1 auto;
  min-width: 0;
}

.item-edit{
  flex: 0 0 auto;
  align-self: center;
  white-space: nowrap;
}

.item-card{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 12px;
}

.item-left{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.item-emoji{
  width: 34px;
  text-align: center;
}

.item-name{
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-right{
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
}

.item-time{
  color: var(--user-glow);
}

.mini-progress{
  width: 220px;
  max-width: 42vw;
}

.timer-header{
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.active-item{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.active-name{
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 52vw;
}

.btn-compact{
  padding: 6px 10px;
}

.level-box{
  width: min(92vw, 880px);
  border-color: var(--gb-mid) !important;
  box-shadow: inset 0 0 0 2px var(--gb-shadow);
  background: rgba(7,28,7,.35);
  padding: 12px 12px;
}

.level-line{
  display: flex;
  align-items: baseline;
  gap: 10px;
  margin-bottom: 10px;
}

.level-value{
  color: var(--user-glow);
}

.level-next{
  margin-left: auto;
  color: var(--gb-light);
  font-size: 12px;
}

.dialog-form{
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.dialog-menu{
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.settings-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

.color-input{
  width: 100%;
  height: 44px;
  background: transparent;
  border: 0;
  padding: 0;
}
/* --- 完美手機自動排版系統 --- */
@media (max-width: 600px) {
    /* 1. 讓外框自動適應螢幕，留出一點邊距才美觀 */
    .container {
        width: 92% !important;
        max-width: none !important;
        margin: 10px auto !important;
        padding: 15px !important;
        box-sizing: border-box !important;
    }

    /* 2. 讓按鈕區變成「自動流動」模式 */
    .button-group, .controls, .settings-grid { 
        display: flex !important;
        flex-wrap: wrap !important; /* 核心：空間不夠自動換下一行 */
        justify-content: space-around !important; /* 讓按鈕均勻分散 */
        gap: 12px !important; /* 按鈕之間的舒適間距 */
    }

    /* 3. 讓按鈕大小「剛剛好」 */
    /* 在小手機會一排一個，在大手機會自動變一排兩個 */
    button {
        flex: 1 1 120px !important; /* 寬度最少 120px，會自動填滿剩餘空間 */
        min-height: 48px !important; /* 符合人體工學的點擊高度 */
        font-size: 15px !important;
        padding: 8px 5px !important;
        margin: 0 !important;
    }

    /* 4. 修正計時器區塊，確保不超出螢幕 */
    .timer-display {
        font-size: 1.5rem !important;
        width: 100% !important;
        overflow-x: hidden !important;
    }
}
